{% extends 'base.html' %}

{% block title %}Move {{ horse.name }} - Cgate{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-6">

    <!-- Page Header -->
    <div class="page-header">
        <div>
            <h1 class="page-title">Move {{ horse.name }}</h1>
            <p class="page-subtitle">
                {% if current_placement %}
                Currently at {{ current_placement.location.name }} ({{ current_placement.owner.name }})
                {% else %}
                No current placement
                {% endif %}
            </p>
        </div>
    </div>

    <!-- Current Placement Summary -->
    {% if current_placement %}
    <div class="card bg-slate-50 border-slate-200 p-4 mb-6">
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm">
            <div>
                <dt class="text-xs font-medium text-slate-500 uppercase tracking-wider">Current Location</dt>
                <dd class="mt-0.5 font-medium text-slate-900">{{ current_placement.location.name }}</dd>
            </div>
            <div>
                <dt class="text-xs font-medium text-slate-500 uppercase tracking-wider">Owner</dt>
                <dd class="mt-0.5 font-medium text-slate-900">{{ current_placement.owner.name }}</dd>
            </div>
            <div>
                <dt class="text-xs font-medium text-slate-500 uppercase tracking-wider">Rate</dt>
                <dd class="mt-0.5 font-medium text-slate-900">{{ current_placement.rate_type.name }} (&pound;{{ current_placement.rate_type.daily_rate }}/day)</dd>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Move Form -->
    <div class="card">
        <form method="post">
            {% csrf_token %}

            <fieldset class="p-5 space-y-5">
                <legend class="text-base font-semibold text-slate-800 mb-4">New Placement</legend>

                <div>
                    <label for="id_new_location" class="block text-sm font-medium text-slate-700">New Location *</label>
                    {{ form.new_location }}
                    {% if form.new_location.errors %}
                    <p class="mt-1 text-xs text-red-600">{{ form.new_location.errors.0 }}</p>
                    {% endif %}
                </div>

                <div>
                    <label for="id_new_owner" class="block text-sm font-medium text-slate-700">New Owner</label>
                    {{ form.new_owner }}
                    {% if form.new_owner.errors %}
                    <p class="mt-1 text-xs text-red-600">{{ form.new_owner.errors.0 }}</p>
                    {% endif %}
                    <p class="mt-1 text-xs text-slate-400">Leave empty to keep current owner</p>
                </div>

                <div>
                    <label for="id_new_rate_type" class="block text-sm font-medium text-slate-700">New Rate</label>
                    {{ form.new_rate_type }}
                    {% if form.new_rate_type.errors %}
                    <p class="mt-1 text-xs text-red-600">{{ form.new_rate_type.errors.0 }}</p>
                    {% endif %}
                    <p class="mt-1 text-xs text-slate-400">Leave empty to keep current rate</p>
                </div>

                <div>
                    <label for="id_move_date" class="block text-sm font-medium text-slate-700">Move Date *</label>
                    {{ form.move_date }}
                    {% if form.move_date.errors %}
                    <p class="mt-1 text-xs text-red-600">{{ form.move_date.errors.0 }}</p>
                    {% endif %}
                </div>

                <div>
                    <label for="id_notes" class="block text-sm font-medium text-slate-700">Notes</label>
                    {{ form.notes }}
                    {% if form.notes.errors %}
                    <p class="mt-1 text-xs text-red-600">{{ form.notes.errors.0 }}</p>
                    {% endif %}
                </div>
            </fieldset>

            <!-- Footer -->
            <div class="border-t border-slate-100 px-5 py-4 bg-slate-50 rounded-b-xl flex justify-end gap-3">
                <a href="{% url 'horse_detail' horse.pk %}" class="btn-secondary">Cancel</a>
                <button type="submit" class="btn-primary">
                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"/>
                    </svg>
                    Move Horse
                </button>
            </div>
        </form>
    </div>

</div>
{% endblock %}
